[gd_scene load_steps=21 format=3 uid="uid://clsbe0wmnd3pk"]

[ext_resource type="PackedScene" uid="uid://bw486lcwnfc1v" path="res://player.tscn" id="1_ig7tw"]
[ext_resource type="Script" uid="uid://widsceml1k7w" path="res://main.gd" id="1_lquwl"]
[ext_resource type="PackedScene" uid="uid://1g8offdq1llv" path="res://enemy_shooter.tscn" id="3_5vw27"]
[ext_resource type="PackedScene" uid="uid://wi3x3ocdbs1p" path="res://game_over_ui.tscn" id="3_7mycd"]
[ext_resource type="PackedScene" uid="uid://ccdklbr2ishf5" path="res://enemy.tscn" id="3_h2yge"]
[ext_resource type="Texture2D" uid="uid://ch4lywf3lvhgc" path="res://tileset2.png" id="4_lquwl"]
[ext_resource type="Texture2D" uid="uid://swur15bmrdc2" path="res://tileset1.png" id="5_7mycd"]
[ext_resource type="PackedScene" uid="uid://c7t78jgnvl2un" path="res://boss.tscn" id="5_efxa6"]
[ext_resource type="PackedScene" uid="uid://b6if0fkv6w301" path="res://teleporter.tscn" id="6_dg77c"]
[ext_resource type="PackedScene" uid="uid://hoxqhlxrpdkh" path="res://pause_menu.tscn" id="7_272bh"]
[ext_resource type="Script" uid="uid://y8b17ufupc5r" path="res://dungeon_generator.gd" id="9_kek77"]
[ext_resource type="Theme" uid="uid://8c4hyhwlbged" path="res://new_theme.tres" id="10_w48qg"]
[ext_resource type="PackedScene" uid="uid://d25emud0qbn48" path="res://health_bar.tscn" id="10_ycdy4"]
[ext_resource type="Texture2D" uid="uid://co54yi75oj7t7" path="res://game_bg.png" id="12_dg77c"]

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_kek77"]
polygon = PackedVector2Array(-16, -16, -16, 16, 16, 16, 16, -16)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_5vw27"]
polygon = PackedVector2Array(-8, -8, -8, 8, 8, 8, 8, -8)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_272bh"]
texture = ExtResource("4_lquwl")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_kek77")
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, 16, -16, -16, 16, -16, 16, 16)
1:0/0 = 0
1:0/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_5vw27")
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:1/0 = 0
0:1/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_5vw27")
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:1/0 = 0
1:1/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_5vw27")
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSet" id="TileSet_5vw27"]
tile_size = Vector2i(32, 32)
occlusion_layer_0/light_mask = 1
physics_layer_0/collision_layer = 4
physics_layer_0/collision_mask = 0
sources/0 = SubResource("TileSetAtlasSource_272bh")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_kek77"]
texture = ExtResource("5_7mycd")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, -16, 16, 16, 16, 16, -16)
1:0/0 = 0
0:1/0 = 0
1:1/0 = 0

[sub_resource type="TileSet" id="TileSet_4c57u"]
tile_size = Vector2i(32, 32)
physics_layer_0/collision_layer = 0
physics_layer_0/collision_mask = 0
sources/0 = SubResource("TileSetAtlasSource_kek77")

[node name="Map" type="Node2D"]
process_mode = 1
script = ExtResource("1_lquwl")
enemy_scenes = Array[PackedScene]([ExtResource("3_h2yge"), ExtResource("3_5vw27")])
game_over_scene = ExtResource("3_7mycd")
boss_scene = ExtResource("5_efxa6")
teleporter_scene = ExtResource("6_dg77c")

[node name="Walls" type="TileMapLayer" parent="."]
z_index = 10
y_sort_enabled = true
tile_set = SubResource("TileSet_5vw27")

[node name="Floor" type="TileMapLayer" parent="."]
z_index = -10
y_sort_enabled = true
tile_set = SubResource("TileSet_4c57u")

[node name="Player" parent="." instance=ExtResource("1_ig7tw")]
z_index = 5
position = Vector2(144, 139)

[node name="SpawnTimer" type="Timer" parent="."]
wait_time = 2.0
autostart = true

[node name="UI" type="CanvasLayer" parent="."]

[node name="ScoreLabel" type="Label" parent="UI"]
offset_left = 25.0
offset_top = 90.0
offset_right = 146.0
offset_bottom = 135.0
theme = ExtResource("10_w48qg")
theme_override_font_sizes/font_size = 32
text = "Score: 0"

[node name="HealthBar" parent="UI" instance=ExtResource("10_ycdy4")]

[node name="PauseMenu" parent="." instance=ExtResource("7_272bh")]
visible = false

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.10091939, 0.10093353, 0.18325466, 1)

[node name="DungeonGenerator" type="Node" parent="." node_paths=PackedStringArray("floor_layer", "walls_layer")]
script = ExtResource("9_kek77")
floor_layer = NodePath("../Floor")
walls_layer = NodePath("../Walls")

[node name="Parallax2D" type="Parallax2D" parent="."]
z_index = -100
scroll_scale = Vector2(0.5, 0.5)
repeat_size = Vector2(1024, 600)
autoscroll = Vector2(10, 5)

[node name="Sprite2D" type="Sprite2D" parent="Parallax2D"]
texture = ExtResource("12_dg77c")
region_enabled = true
region_rect = Rect2(0, 0, 4000, 4000)

[connection signal="timeout" from="SpawnTimer" to="." method="_on_spawn_timer_timeout"]
